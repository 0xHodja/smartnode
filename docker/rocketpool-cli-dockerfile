# Start from golang image
FROM golang

# Install dep
RUN go get -u github.com/golang/dep/cmd/dep

# Copy source files
ADD . /go/src/github.com/rocket-pool/smartnode

# Install go dependencies
WORKDIR /go/src/github.com/rocket-pool/smartnode
RUN dep ensure
RUN go get -d github.com/ethereum/go-ethereum

# Compile & install
RUN go install github.com/rocket-pool/smartnode/rocketpool-cli

# Container entry point
ENTRYPOINT /go/bin/rocketpool-cli
